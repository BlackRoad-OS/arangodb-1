<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="1" failures="0" skipped="0" tests="1" time="9.224" timestamp="2025-09-17T18:18:53.710963+02:00" hostname="Ryzen-ArangoDB"><testcase classname="tests.shell_api.test_statistics.TestStatisticsAPI" name="test_statistics_correct_endpoint" time="9.128"><error message="failed on setup with &quot;armadillo.core.errors.ServerStartupError: Failed to deploy servers: Deployment health verification failed: No deployment active&quot;">self = &lt;armadillo.instances.manager.InstanceManager object at 0x76ea8c218ec0&gt;
timeout = 300.0

    def deploy_servers(self, timeout: float = 300.0) -&gt; None:
        """Deploy all servers according to the current plan.
    
        Args:
            timeout: Maximum time to wait for deployment
    
        Raises:
            ServerStartupError: If server deployment fails
            TimeoutError: If deployment times out
        """
        if not self._deployment_plan:
            raise ServerError("No deployment plan created")
    
        if self._is_deployed:
            raise ServerError("Deployment already active")
    
        plan = self._deployment_plan
        timeout = clamp_timeout(timeout, "deployment")
    
        with timeout_scope(timeout, f"deploy_servers_{self.deployment_id}"):
            logger.info(f"Starting deployment of {len(plan.servers)} servers")
            self._startup_time = time.time()
    
            try:
                # Create server instances
                self._create_server_instances()
    
                # Start servers in proper order
                if plan.deployment_mode == DeploymentMode.SINGLE_SERVER:
                    self._start_single_server()
                elif plan.deployment_mode == DeploymentMode.CLUSTER:
                    self._start_cluster()
    
                # Verify deployment health
&gt;               self._verify_deployment_health()

armadillo/instances/manager.py:176: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;armadillo.instances.manager.InstanceManager object at 0x76ea8c218ec0&gt;

    def _verify_deployment_health(self) -&gt; None:
        """Verify that all servers in deployment are healthy."""
        logger.info("Verifying deployment health")
    
        health = self.check_deployment_health(timeout=30.0)
        if not health.is_healthy:
&gt;           raise HealthCheckError(f"Deployment health verification failed: {health.error_message}")
E           armadillo.core.errors.HealthCheckError: Deployment health verification failed: No deployment active

armadillo/instances/manager.py:722: HealthCheckError

During handling of the above exception, another exception occurred:

fixturedef = &lt;FixtureDef argname='arango_deployment' scope='session' baseid=''&gt;
request = &lt;SubRequest 'arango_deployment' for &lt;Function test_statistics_correct_endpoint&gt;&gt;

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -&gt; object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
&gt;               return (yield)
                        ^^^^^

/home/mpoeter/.local/share/mise/installs/python/3.13.3/lib/python3.13/site-packages/pytest_asyncio/plugin.py:681: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
armadillo/pytest_plugin/plugin.py:319: in arango_deployment
    cluster_manager = _plugin._get_or_create_cluster()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
armadillo/pytest_plugin/plugin.py:348: in _get_or_create_cluster
    manager.deploy_servers(timeout=300.0)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = &lt;armadillo.instances.manager.InstanceManager object at 0x76ea8c218ec0&gt;
timeout = 300.0

    def deploy_servers(self, timeout: float = 300.0) -&gt; None:
        """Deploy all servers according to the current plan.
    
        Args:
            timeout: Maximum time to wait for deployment
    
        Raises:
            ServerStartupError: If server deployment fails
            TimeoutError: If deployment times out
        """
        if not self._deployment_plan:
            raise ServerError("No deployment plan created")
    
        if self._is_deployed:
            raise ServerError("Deployment already active")
    
        plan = self._deployment_plan
        timeout = clamp_timeout(timeout, "deployment")
    
        with timeout_scope(timeout, f"deploy_servers_{self.deployment_id}"):
            logger.info(f"Starting deployment of {len(plan.servers)} servers")
            self._startup_time = time.time()
    
            try:
                # Create server instances
                self._create_server_instances()
    
                # Start servers in proper order
                if plan.deployment_mode == DeploymentMode.SINGLE_SERVER:
                    self._start_single_server()
                elif plan.deployment_mode == DeploymentMode.CLUSTER:
                    self._start_cluster()
    
                # Verify deployment health
                self._verify_deployment_health()
    
                self._is_deployed = True
                self._is_healthy = True
    
                deployment_time = time.time() - self._startup_time
                logger.info(f"Deployment completed successfully in {deployment_time:.2f}s")
    
            except Exception as e:
                logger.error(f"Deployment failed: {e}")
                # Try to cleanup partial deployment
                try:
                    self.shutdown_deployment()
                except:
                    pass
&gt;               raise ServerStartupError(f"Failed to deploy servers: {e}")
E               armadillo.core.errors.ServerStartupError: Failed to deploy servers: Deployment health verification failed: No deployment active

armadillo/instances/manager.py:191: ServerStartupError</error></testcase></testsuite></testsuites>