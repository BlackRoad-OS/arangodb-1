{"id":"armadillo-1","title":"Refactor InstanceManager to use ApplicationContext pattern","description":"Apply the same ApplicationContext dependency injection pattern to InstanceManager that was successfully applied to ArangoServer. This would eliminate remaining global state and improve testability.","design":"- Create factory methods: create_single(), create_cluster()\n- Accept ApplicationContext instead of individual dependencies  \n- Maintain backward compatibility with deprecation warnings\n- Similar to ArangoServer refactoring in Phase 2-1","acceptance_criteria":"- InstanceManager accepts ApplicationContext\n- Factory methods available\n- All existing tests pass\n- Backward compatibility maintained","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-24T13:02:33.330173188+02:00","updated_at":"2025-10-24T13:02:33.330173188+02:00"}
{"id":"armadillo-2","title":"Remove ServerDependencies and ManagerDependencies wrapper classes","description":"After refactoring both ArangoServer and InstanceManager to use ApplicationContext, the ServerDependencies and ManagerDependencies wrapper classes are no longer needed and can be removed. This will simplify the codebase.","design":"- Remove ServerDependencies dataclass from instances/server.py\n- Remove ManagerDependencies dataclass from instances/manager.py\n- Update any remaining references\n- Clean up imports","acceptance_criteria":"- Both wrapper classes removed\n- No test failures\n- Code is cleaner and simpler","status":"open","priority":3,"issue_type":"chore","created_at":"2025-10-24T13:02:44.480484412+02:00","updated_at":"2025-10-24T13:02:44.480484412+02:00","dependencies":[{"issue_id":"armadillo-2","depends_on_id":"armadillo-1","type":"blocks","created_at":"2025-10-24T13:02:44.485013532+02:00","created_by":"daemon"}]}
{"id":"armadillo-3","title":"Update all InstanceManager creation call sites to use factory methods","description":"After refactoring InstanceManager to use ApplicationContext, update all call sites throughout the codebase to use the new factory methods instead of direct instantiation.","design":"- Find all InstanceManager() instantiations\n- Replace with factory method calls\n- Update tests to use ApplicationContext.for_testing()\n- Verify all tests pass","acceptance_criteria":"- All call sites updated\n- Tests using ApplicationContext.for_testing()\n- No deprecation warnings in new code\n- All tests passing","status":"open","priority":3,"issue_type":"task","created_at":"2025-10-24T13:02:53.150409593+02:00","updated_at":"2025-10-24T13:02:53.150409593+02:00","dependencies":[{"issue_id":"armadillo-3","depends_on_id":"armadillo-1","type":"blocks","created_at":"2025-10-24T13:02:53.163651939+02:00","created_by":"daemon"}]}
{"id":"armadillo-4","title":"Eliminate circular imports by removing TYPE_CHECKING pattern","description":"Remove TYPE_CHECKING workaround by fixing the root cause of circular dependencies through proper module layering. Separate pure utilities from stateful services in FilesystemService.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T13:03:02.749927109+02:00","updated_at":"2025-10-24T13:03:10.400456451+02:00","closed_at":"2025-10-24T13:03:10.400456451+02:00"}
{"id":"armadillo-5","title":"Refactor ArangoServer to use ApplicationContext pattern","description":"Refactor ArangoServer to use clean dependency injection via ApplicationContext. Add factory methods, maintain backward compatibility, update tests and supporting classes.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T13:03:17.463688327+02:00","updated_at":"2025-10-24T13:03:25.52620532+02:00","closed_at":"2025-10-24T13:03:25.52620532+02:00"}
{"id":"armadillo-6","title":"Test MCP integration","description":"Testing that bd MCP tools work correctly after environment variable configuration","status":"closed","priority":4,"issue_type":"task","created_at":"2025-10-24T13:35:34.414415135+02:00","updated_at":"2025-10-24T13:35:43.746230127+02:00","closed_at":"2025-10-24T13:35:43.746230127+02:00"}
{"id":"armadillo-7","title":"Remove all backward compatibility code and clean up architecture","description":"This is NEW code with no external users. Remove all backward compatibility shims, deprecated code paths, and clean up the architecture to only support the new ApplicationContext pattern.","design":"- Remove ServerDependencies and ManagerDependencies classes entirely\n- Clean ArangoServer constructor to ONLY accept new pattern (server_id, role, port, paths, app_context)\n- Remove _init_backward_compat method\n- Remove all deprecation warnings\n- Update ALL test files to use factory methods\n- Remove all 'backward compatibility' comments\n- Clean up InstanceManager similarly","acceptance_criteria":"- No ServerDependencies/ManagerDependencies classes exist\n- Constructor is clean and simple\n- All tests using factory methods\n- No deprecation warnings anywhere\n- All tests passing","notes":"Completed ArangoServer cleanup: Removed ServerDependencies, all backward compatibility code, updated all tests. 484 tests passing (up from 434). InstanceManager cleanup remains as separate phase.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-10-24T13:43:15.206650956+02:00","updated_at":"2025-10-24T14:13:46.151774319+02:00","closed_at":"2025-10-24T14:13:46.151774319+02:00"}
